import{d as x,c as I,e as P,A as S,b as c,j as O}from"./index-Br3W-CJe.js";import{e as b}from"./cartAction-DWY5Wbgu.js";import{n as h,c as g,g as j}from"./orderAction-CwEXeCV1.js";import{L}from"./Loader-C83tTrIY.js";import{u as i}from"./useSelector-NGf-tHxd.js";import"./CircularProgress-Qlz96_pX.js";const N=()=>{const e=x(),a=I(),{enqueueSnackbar:s}=P(),d=S(),{shippingInfo:y,cartItems:u}=i(r=>r.cart),{loading:f,txn:t,error:o}=i(r=>r.paymentStatus),{loading:m,order:E,error:n}=i(r=>r.newOrder),v=u.reduce((r,l)=>r+l.price*l.quantity,0),p={paymentInfo:{id:t,status:"success"},shippingInfo:y,orderItems:u,totalPrice:v};return c.useEffect(()=>{f===!1&&(t?t.status==="captured"?(p.paymentInfo={id:t.id,status:t.status},e(h(p))):(s("Processing Payment Failed!",{variant:"error"}),a("/orders/failed")):a("/cart"))},[f]),c.useEffect(()=>{m===!1&&(E?(s("Order Placed",{variant:"success"}),e(b()),a("/orders/success")):a("/orders"))},[m]),c.useEffect(()=>{o&&(s(o,{variant:"error"}),e(g())),n&&(s(n,{variant:"error"}),e(g())),e(j(d.id))},[e,o,n,d.id,s]),O.jsx(L,{})};export{N as default};
