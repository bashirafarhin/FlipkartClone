import{r as k,a as q,g as L,j as e,L as z,d as T,e as U,b as n}from"./index-Br3W-CJe.js";import{c as _,m as B}from"./orderAction-CwEXeCV1.js";import{L as Y}from"./Loader-C83tTrIY.js";import{r as P}from"./createSvgIcon-7u55HdvA.js";import{C as N}from"./Circle-BBEbk15o.js";import{f as S}from"./functions-wGAcNyKq.js";import{S as $}from"./Search-C45X8g3m.js";import{M as G}from"./MinCategory-Dq_xbLph.js";import{M as J}from"./MetaData-LX1NH3aX.js";import{F as w}from"./FormControl-DDxEZTCz.js";import{R as y,F as R,a as D}from"./RadioGroup-PJPV87bq.js";import{u as Q}from"./useSelector-NGf-tHxd.js";import"./CircularProgress-Qlz96_pX.js";import"./createSvgIcon-CPjUyy1Y.js";import"./isMuiElement-CJt_OsMT.js";import"./useIsFocusVisible-CXnvPnDT.js";import"./ExpandMore-DQS_Sl5R.js";import"./Typography-D1NxXccX.js";import"./useThemeProps-CJ845tct.js";import"./ButtonBase-1GGwDSII.js";var p={},F;function H(){if(F)return p;F=1;var d=k();Object.defineProperty(p,"__esModule",{value:!0}),p.default=void 0;var c=d(P()),t=q();return p.default=(0,c.default)((0,t.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"}),"RadioButtonUnchecked"),p}var K=H();const V=L(K),W=d=>{const{orderId:c,name:t,image:f,price:a,quantity:m,createdAt:x,deliveredAt:h,orderStatus:o}=d;return e.jsxs(z,{to:`/order_details/${c}`,className:"flex p-4 items-start bg-white border rounded gap-2 sm:gap-0 hover:shadow-lg",children:[e.jsx("div",{className:"w-full sm:w-32 h-20",children:e.jsx("img",{loading:"lazy",draggable:"false",className:"h-full w-full object-contain",src:f,alt:t})}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between w-full",children:[e.jsxs("div",{className:"flex flex-col gap-1 overflow-hidden",children:[e.jsx("p",{className:"text-sm",children:t.length>40?`${t.substring(0,40)}...`:t}),e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Quantity: ",m]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Total: ₹",(m*a).toLocaleString()]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row mt-1 sm:mt-0 gap-2 sm:gap-20 sm:w-1/2",children:[e.jsxs("p",{className:"text-sm",children:["₹",a.toLocaleString()]}),e.jsxs("div",{className:"flex flex-col gap-1.5",children:[e.jsx("p",{className:"text-sm font-medium flex items-center gap-1",children:o==="Shipped"?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-primary-orange pb-0.5",children:e.jsx(N,{sx:{fontSize:"14px"}})}),"Shipped"]}):o==="Delivered"?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-primary-green pb-0.5",children:e.jsx(N,{sx:{fontSize:"14px"}})}),"Delivered on ",S(h)]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-primary-green pb-0.5",children:e.jsx(V,{sx:{fontSize:"14px"}})}),"Ordered on ",S(x)]})}),o==="Delivered"?e.jsxs("p",{className:"text-xs ml-1",children:["Your item has been ",o]}):o==="Shipped"?e.jsxs("p",{className:"text-xs ml-1",children:["Your item has been ",o]}):e.jsx("p",{className:"text-xs ml-1",children:"Seller has processed your order"})]})]})]})]})},X=["Processing","Shipped","Delivered"],u=new Date,Z=[u.getMonth(),u.getFullYear()-1,u.getFullYear()-2],ve=()=>{const d=T(),{enqueueSnackbar:c}=U(),[t,f]=n.useState(""),[a,m]=n.useState(0),[x,h]=n.useState(""),[o,i]=n.useState([]),{orders:l,loading:j,error:b}=Q(s=>s.myOrders);n.useEffect(()=>{b&&(c(b,{variant:"error"}),d(_())),d(B())},[d,b,c]),n.useEffect(()=>{j===!1&&i(l)},[j,l]),n.useEffect(()=>{if(h(""),!t&&+a==0){i(l);return}if(t&&a)if(+a===u.getMonth()){const s=l.filter(r=>r.orderStatus===t&&new Date(r.createdAt).getMonth()===+a);i(s)}else{const s=l.filter(r=>r.orderStatus===t&&new Date(r.createdAt).getFullYear()===+a);i(s)}else if(t){const s=l.filter(r=>r.orderStatus===t);i(s)}else if(+a===u.getMonth()){const s=l.filter(r=>new Date(r.createdAt).getMonth()===+a);i(s)}else{const s=l.filter(r=>new Date(r.createdAt).getFullYear()===+a);i(s)}},[t,a]);const E=s=>{if(s.preventDefault(),!x.trim()){c("Empty Input",{variant:"warning"});return}const r=l.map(g=>({...g,orderItems:g.orderItems.filter(v=>v.name.toLowerCase().includes(x.toLowerCase()))}));i(r)},M=()=>{f(""),m(0)};return e.jsxs(e.Fragment,{children:[e.jsx(J,{title:"My Orders | Flipkart"}),e.jsx(G,{}),e.jsx("main",{className:"w-full mt-16 sm:mt-0",children:e.jsxs("div",{className:"flex gap-3.5 mt-2 sm:mt-6 sm:mx-3 m-auto mb-7",children:[e.jsx("div",{className:"hidden sm:flex flex-col w-1/5 px-1",children:e.jsxs("div",{className:"flex flex-col bg-white rounded-sm shadow",children:[e.jsxs("div",{className:"flex items-center justify-between gap-5 px-4 py-2 border-b",children:[e.jsx("p",{className:"text-lg font-medium",children:"Filters"}),e.jsx("span",{onClick:M,className:"text-blue-600 font-medium text-sm uppercase cursor-pointer hover:text-blue-700",children:"clear all"})]}),e.jsxs("div",{className:"flex flex-col py-3 text-sm",children:[e.jsx("span",{className:"font-medium px-4",children:"ORDER STATUS"}),e.jsx("div",{className:"flex flex-col gap-3 px-4 mt-1 pb-3 border-b",children:e.jsx(w,{children:e.jsx(y,{"aria-labelledby":"orderstatus-radio-buttons-group",onChange:s=>f(s.target.value),name:"orderstatus-radio-buttons",value:t,children:X.map((s,r)=>e.jsx(R,{value:s,control:e.jsx(D,{size:"small"}),label:e.jsx("span",{className:"text-sm",children:s})},r))})})})]}),e.jsxs("div",{className:"flex flex-col pb-2 text-sm",children:[e.jsx("span",{className:"font-medium px-4",children:"ORDER TIME"}),e.jsx("div",{className:"flex flex-col gap-3 mt-1 px-4 pb-3",children:e.jsx(w,{children:e.jsx(y,{"aria-labelledby":"ordertime-radio-buttons-group",onChange:s=>m(s.target.value),name:"ordertime-radio-buttons",value:a,children:Z.map((s,r)=>e.jsx(R,{value:s,control:e.jsx(D,{size:"small"}),label:e.jsx("span",{className:"text-sm",children:r===0?"This Month":s})},r))})})})]})]})}),e.jsx("div",{className:"flex-1",children:j?e.jsx(Y,{}):e.jsxs("div",{className:"flex flex-col gap-3 sm:mr-4 overflow-hidden",children:[e.jsxs("form",{onSubmit:E,className:"flex items-center justify-between mx-1 sm:mx-0 sm:w-10/12 bg-white border rounded hover:shadow",children:[e.jsx("input",{value:x,onChange:s=>h(s.target.value),type:"search",name:"search",placeholder:"Search your orders here",className:"p-2 text-sm outline-none flex-1 rounded-l"}),e.jsxs("button",{type:"submit",className:"h-full text-sm px-1 sm:px-4 py-2.5 text-white bg-primary-blue hover:bg-blue-600 rounded-r flex items-center gap-1",children:[e.jsx($,{sx:{fontSize:"22px"}}),"Search Orders"]})]}),l&&o.length===0&&e.jsxs("div",{className:"flex items-center flex-col gap-2 p-8 bg-white",children:[e.jsx("img",{loading:"lazy",draggable:"false",src:"https://rukminim1.flixcart.com/www/100/100/promos/23/08/2020/c5f14d2a-2431-4a36-b6cb-8b5b5e283d4f.png",alt:"Empty Orders"}),e.jsx("span",{className:"text-lg font-medium",children:"Sorry, no results found"}),e.jsx("p",{children:"Edit search or clear all filters"})]}),l&&o.map(s=>{const{_id:r,orderStatus:g,orderItems:v,createdAt:O,deliveredAt:A}=s;return v.map((C,I)=>n.createElement(W,{...C,key:I,orderId:r,orderStatus:g,createdAt:O,deliveredAt:A}))}).reverse()]})})]})})]})};export{ve as default};
